"use strict";function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var navMenu=document.getElementById("nav-menu"),navToggle=document.getElementById("nav-toggle"),navClose=document.getElementById("nav-close");navToggle&&navToggle.addEventListener("click",function(){navMenu.classList.add("show-menu")}),navClose&&navClose.addEventListener("click",function(){navMenu.classList.remove("show-menu")});var navLink=document.querySelectorAll(".nav__link");function linkAction(){document.getElementById("nav-menu").classList.remove("show-menu")}navLink.forEach(function(e){return e.addEventListener("click",linkAction)});var swiperPortfolio=new Swiper(".portfolio__container",{cssMode:!0,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0}});function scrollHeader(){var e=document.getElementById("header");80<=this.scrollY?e.classList.add("scroll-header"):e.classList.remove("scroll-header")}function scrollUp(){var e=document.getElementById("scroll-up");560<=this.scrollY?e.classList.add("show-scroll"):e.classList.remove("show-scroll")}window.addEventListener("scroll",scrollHeader),window.addEventListener("scroll",scrollUp);var themeButton=document.getElementById("theme-button"),darkTheme="dark-theme",iconTheme="fa-sun",selectedTheme=localStorage.getItem("selected-theme"),selectedIcon=localStorage.getItem("selected-icon"),getCurrentTheme=function(){return document.body.classList.contains(darkTheme)?"dark":"light"},getCurrentIcon=function(){return themeButton.classList.contains(iconTheme)?"fa-moon":"fa-sun"};selectedTheme&&(document.body.classList["dark"===selectedTheme?"add":"remove"](darkTheme),themeButton.classList["fa-moon"===selectedIcon?"add":"remove"](iconTheme)),themeButton.addEventListener("click",function(){document.body.classList.toggle(darkTheme),themeButton.classList.toggle(iconTheme),localStorage.setItem("selected-theme",getCurrentTheme()),localStorage.setItem("selected-icon",getCurrentIcon())}),function(){function i(e){null!==(e=e.nextElementSibling)&&e.classList.contains("form-error-text")&&e.remove()}function l(e,t){null!==(e=e.nextElementSibling)&&e.classList.contains("form-error-text")&&(e.style.display=t?"block":"none",e.setAttribute("aria-hidden",t))}function s(e,t){t?e.classList.add("field-error"):(e.classList.remove("field-error"),l(e,!1))}var c=document.querySelector("#contactForm"),d=c.querySelectorAll("[required]");c.setAttribute("novalidate",!0);var e,t=_createForOfIteratorHelper(d);try{for(t.s();!(e=t.n()).done;)e.value.addEventListener("input",function(e){return s(e.target,!e.target.checkValidity())})}catch(e){t.e(e)}finally{t.f()}c.addEventListener("submit",function(e){e.preventDefault();var t=_createForOfIteratorHelper(d);try{for(t.s();!(n=t.n()).done;){var n=n.value;i(n),n.classList.remove("field-error"),n.checkValidity()||(function(e,t){i(e);var n=document.createElement("div");n.classList.add("form-error-text"),n.innerText=t,null===e.nextElementSibling?e.parentElement.appendChild(n):e.nextElementSibling.classList.contains("form-error-text")||e.parentElement.insertBefore(n,e.nextElementSibling)}(n,n.dataset.errorText),n.classList.add("field-error"),formHasErrors=!0)}}catch(e){t.e(e)}finally{t.f()}var o=c.querySelector("[type=submit]");o.disabled=!0,o.classList.add("loading");var r=new FormData(c),a=c.getAttribute("action"),e=c.getAttribute("method");fetch(a,{method:e.toUpperCase(),body:r}).then(function(e){return e.json()}).then(function(e){if(e.errors){var t=e.errors.map(function(e){return'[name="'.concat(e,'"]')}),n=_createForOfIteratorHelper(c.querySelectorAll(t.join(",")));try{for(n.s();!(r=n.n()).done;){var r=r.value;s(r,!0),l(r,!0)}}catch(e){n.e(e)}finally{n.f()}}else"ok"===e.status&&((t=document.createElement("div")).classList.add("form-send-success"),t.innerText="Wysłanie wiadomości się nie powiodło",c.parentElement.insertBefore(t,c),t.innerHTML="\n                            <strong>Wiadomość została wysłana</strong>\n                            <span>Dziękujemy za kontakt. Postaramy się odpowiedzieć jak najszybciej</span>\n                        ",c.remove()),"error"===e.status&&((e=document.querySelector(".form-send-error"))&&e.remove(),(e=document.createElement("div")).classList.add("form-send-error"),e.innerText="Wysłanie wiadomości się nie powiodło",o.parentElement.appendChild(e))}).finally(function(){o.disabled=!1,o.classList.remove("loading")})})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibmF2TWVudSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJuYXZUb2dnbGUiLCJuYXZDbG9zZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJuYXZMaW5rIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJuIiwibGlua0FjdGlvbiIsInN3aXBlclBvcnRmb2xpbyIsIlN3aXBlciIsImNzc01vZGUiLCJuYXZpZ2F0aW9uIiwibmV4dEVsIiwicHJldkVsIiwiY2xpY2thYmxlIiwic2Nyb2xsSGVhZGVyIiwibmF2IiwiYWRkIiwic2Nyb2xsVXAiLCJ3aW5kb3ciLCJ0aGlzIiwic2Nyb2xsWSIsInRoZW1lQnV0dG9uIiwiZGFya1RoZW1lIiwiaWNvblRoZW1lIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNlbGVjdGVkSWNvbiIsImdldEN1cnJlbnRUaGVtZSIsImJvZHkiLCJjb250YWlucyIsInNlbGVjdGVkVGhlbWUiLCJ0b2dnbGUiLCJzZXRJdGVtIiwiZ2V0Q3VycmVudEljb24iLCJyZW1vdmVGaWVsZEVycm9yIiwiZmllbGQiLCJlcnJvclRleHQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJpbnNlcnRCZWZvcmUiLCJzdHlsZSIsImRpc3BsYXkiLCJzaG93IiwidG9nZ2xlRXJyb3JGaWVsZCIsImZvcm0iLCJxdWVyeVNlbGVjdG9yIiwic2V0QXR0cmlidXRlIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciIsImlucHV0cyIsInMiLCJkb25lIiwidmFsdWUiLCJlIiwibWFya0ZpZWxkQXNFcnJvciIsInRhcmdldCIsImNoZWNrVmFsaWRpdHkiLCJlcnIiLCJmIiwiX2l0ZXJhdG9yMiIsIl9zdGVwMiIsImVsIiwidGV4dCIsImRpdiIsImNyZWF0ZUVsZW1lbnQiLCJjcmVhdGVGaWVsZEVycm9yIiwicGFyZW50RWxlbWVudCIsImlubmVyVGV4dCIsImRhdGFzZXQiLCJmb3JtSGFzRXJyb3JzIiwic3VibWl0IiwiZGlzYWJsZWQiLCJwcmV2ZW50RGVmYXVsdCIsIkZvcm1EYXRhIiwiZm9ybUVycm9ycyIsImdldEF0dHJpYnV0ZSIsIm1ldGhvZCIsImZldGNoIiwidXJsIiwidG9VcHBlckNhc2UiLCJmb3JtRGF0YSIsInRoZW4iLCJyZXMiLCJqc29uIiwic2VsZWN0b3JzIiwiZXJyb3JzIiwibWFwIiwiY29uY2F0Iiwiam9pbiIsInN0YXR1cyIsInN0YXR1c0Vycm9yIiwiZmllbGRzV2l0aEVycm9ycyIsImFwcGVuZENoaWxkIl0sIm1hcHBpbmdzIjoiaXBDQUNBLElBQU1BLFFBQVVDLFNBQVNDLGVBQWUsWUFDcENDLFVBQVlGLFNBQVNDLGVBQWUsY0FDcENFLFNBQVdILFNBQVNDLGVBQWUsYUFJbkNDLFdBUEpBLFVBQUFFLGlCQUFBLFFBQUEsV0FDTUwsUUFBVUMsVUFBU0MsSUFBQUEsZUFNckJDLFVBQ0FBLFNBQVVFLGlCQUFpQixRQUFTLFdBQ2hDTCxRQUFRTSxVQUFjQyxPQUFBLGVBZTlCLElBQU1DLFFBQVVQLFNBQVNRLGlCQUFpQixjQVIxQyxTQUFJTCxhQUNTQyxTQUFpQkgsZUFBUyxZQUFuQ0ksVUFBQUMsT0FBQSxhQU1KQyxRQUFBRSxRQUFBLFNBQUFDLEdBQUEsT0FBQUEsRUFBQU4saUJBQUEsUUFBQU8sY0FPQyxJQUFBQyxnQkFBQSxJQUFBQyxPQUFBLHdCQUFBLENBV0dDLFNBQVMsRUFWYlAsTUFBUUUsRUFBU00sV0FBTVgsQ0FBdkJZLE9BQUEsc0JBUUFDLE9BQUEsdUJBQ0lMLFdBQUFBLENBQ0FFLEdBQVMscUJBQ0hJLFdBRmdELEtBaUIxRCxTQUFBQyxlQUdJLElBQU1DLEVBQU1wQixTQUFTQyxlQUFlLFVBQWZBLElBQWZtQixLQUFNcEIsUUFBU0MsRUFBQUEsVUFBZW9CLElBRGhCLGlCQUVwQkQsRUFBQWYsVUFBQUMsT0FBQSxpQkFLSixTQUFTZ0IsV0FGVEMsSUFBT25CLEVBQUFBLFNBQWlCSCxlQUFVa0IsYUFLVixL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VUFBQSxFQUdkRCxFQUFBdEUsVUFBQUMsT0FBQSxlQS9GYiIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qPT09PT09PT09PT09PT09PT09PT0gTUVOVSBTSE9XIFkgSElEREVOID09PT09PT09PT09PT09PT09PT09Ki9cclxuY29uc3QgbmF2TWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYXYtbWVudScpLFxyXG4gICAgbmF2VG9nZ2xlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hdi10b2dnbGUnKSxcclxuICAgIG5hdkNsb3NlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hdi1jbG9zZScpXHJcblxyXG4vKj09PT09IE1FTlUgU0hPVyA9PT09PSovXHJcbi8qIFZhbGlkYXRlIGlmIGNvbnN0YW50IGV4aXN0cyAqL1xyXG5pZiAobmF2VG9nZ2xlKSB7XHJcbiAgICBuYXZUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgbmF2TWVudS5jbGFzc0xpc3QuYWRkKCdzaG93LW1lbnUnKVxyXG4gICAgfSlcclxufVxyXG5cclxuXHJcbi8qPT09PT0gTUVOVSBISURERU4gPT09PT0qL1xyXG4vKiBWYWxpZGF0ZSBpZiBjb25zdGFudCBleGlzdHMgKi9cclxuaWYgKG5hdkNsb3NlKSB7XHJcbiAgICBuYXZDbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBuYXZNZW51LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3ctbWVudScpXHJcbiAgICB9KVxyXG59XHJcblxyXG5cclxuLyo9PT09PT09PT09PT09PT09PT09PSBSRU1PVkUgTUVOVSBNT0JJTEUgPT09PT09PT09PT09PT09PT09PT0qL1xyXG5jb25zdCBuYXZMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5hdl9fbGluaycpXHJcblxyXG5mdW5jdGlvbiBsaW5rQWN0aW9uKCkge1xyXG4gICAgY29uc3QgbmF2TWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYXYtbWVudScpXHJcbiAgICAvLyBXaGVuIHdlIGNsaWNrIG9uIGVhY2ggbmF2X19saW5rLCB3ZSByZW1vdmUgdGhlIHNob3ctbWVudSBjbGFzc1xyXG4gICAgbmF2TWVudS5jbGFzc0xpc3QucmVtb3ZlKCdzaG93LW1lbnUnKVxyXG59XHJcbm5hdkxpbmsuZm9yRWFjaChuID0+IG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBsaW5rQWN0aW9uKSlcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8qPT09PT09PT09PT09PT09PT09PT0gUE9SVEZPTElPIFNXSVBFUiAgPT09PT09PT09PT09PT09PT09PT0qL1xyXG5sZXQgc3dpcGVyUG9ydGZvbGlvID0gbmV3IFN3aXBlcihcIi5wb3J0Zm9saW9fX2NvbnRhaW5lclwiLCB7XHJcbiAgICBjc3NNb2RlOiB0cnVlLFxyXG4gICAgbG9vcDogdHJ1ZSxcclxuICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICBuZXh0RWw6IFwiLnN3aXBlci1idXR0b24tbmV4dFwiLFxyXG4gICAgICAgIHByZXZFbDogXCIuc3dpcGVyLWJ1dHRvbi1wcmV2XCIsXHJcbiAgICB9LFxyXG4gICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICAgIGVsOiBcIi5zd2lwZXItcGFnaW5hdGlvblwiLFxyXG4gICAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcclxuICAgIH0sXHJcblxyXG59KTtcclxuXHJcblxyXG5cclxuXHJcbi8qPT09PT09PT09PT09PT09PT09PT0gQ0hBTkdFIEJBQ0tHUk9VTkQgSEVBREVSID09PT09PT09PT09PT09PT09PT09Ki9cclxuXHJcbmZ1bmN0aW9uIHNjcm9sbEhlYWRlcigpIHtcclxuICAgIGNvbnN0IG5hdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoZWFkZXInKVxyXG4gICAgLy8gV2hlbiB0aGUgc2Nyb2xsIGlzIGdyZWF0ZXIgdGhhbiAyMDAgdmlld3BvcnQgaGVpZ2h0LCBhZGQgdGhlIHNjcm9sbC1oZWFkZXIgY2xhc3MgdG8gdGhlIGhlYWRlciB0YWdcclxuICAgIGlmICh0aGlzLnNjcm9sbFkgPj0gODApIG5hdi5jbGFzc0xpc3QuYWRkKCdzY3JvbGwtaGVhZGVyJyk7IGVsc2UgbmF2LmNsYXNzTGlzdC5yZW1vdmUoJ3Njcm9sbC1oZWFkZXInKVxyXG59XHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBzY3JvbGxIZWFkZXIpXHJcbi8qPT09PT09PT09PT09PT09PT09PT0gU0hPVyBTQ1JPTEwgVVAgPT09PT09PT09PT09PT09PT09PT0qL1xyXG5mdW5jdGlvbiBzY3JvbGxVcCgpIHtcclxuICAgIGNvbnN0IHNjcm9sbFVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Njcm9sbC11cCcpO1xyXG4gICAgLy8gV2hlbiB0aGUgc2Nyb2xsIGlzIGhpZ2hlciB0aGFuIDU2MCB2aWV3cG9ydCBoZWlnaHQsIGFkZCB0aGUgc2hvdy1zY3JvbGwgY2xhc3MgdG8gdGhlIGEgdGFnIHdpdGggdGhlIHNjcm9sbC10b3AgY2xhc3NcclxuICAgIGlmICh0aGlzLnNjcm9sbFkgPj0gNTYwKSBzY3JvbGxVcC5jbGFzc0xpc3QuYWRkKCdzaG93LXNjcm9sbCcpOyBlbHNlIHNjcm9sbFVwLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3ctc2Nyb2xsJylcclxufVxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgc2Nyb2xsVXApXHJcblxyXG4vKj09PT09PT09PT09PT09PT09PT09IERBUksgTElHSFQgVEhFTUUgPT09PT09PT09PT09PT09PT09PT0qL1xyXG5cclxuXHJcbmNvbnN0IHRoZW1lQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RoZW1lLWJ1dHRvbicpXHJcbmNvbnN0IGRhcmtUaGVtZSA9ICdkYXJrLXRoZW1lJ1xyXG5jb25zdCBpY29uVGhlbWUgPSAnZmEtc3VuJ1xyXG5cclxuLy8gUHJldmlvdXNseSBzZWxlY3RlZCB0b3BpYyAoaWYgdXNlciBzZWxlY3RlZClcclxuY29uc3Qgc2VsZWN0ZWRUaGVtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzZWxlY3RlZC10aGVtZScpXHJcbmNvbnN0IHNlbGVjdGVkSWNvbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzZWxlY3RlZC1pY29uJylcclxuXHJcbi8vIFdlIG9idGFpbiB0aGUgY3VycmVudCB0aGVtZSB0aGF0IHRoZSBpbnRlcmZhY2UgaGFzIGJ5IHZhbGlkYXRpbmcgdGhlIGRhcmstdGhlbWUgY2xhc3NcclxuY29uc3QgZ2V0Q3VycmVudFRoZW1lID0gKCkgPT4gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoZGFya1RoZW1lKSA/ICdkYXJrJyA6ICdsaWdodCdcclxuY29uc3QgZ2V0Q3VycmVudEljb24gPSAoKSA9PiB0aGVtZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoaWNvblRoZW1lKSA/ICdmYS1tb29uJyA6ICdmYS1zdW4nXHJcblxyXG4vLyBXZSB2YWxpZGF0ZSBpZiB0aGUgdXNlciBwcmV2aW91c2x5IGNob3NlIGEgdG9waWNcclxuaWYgKHNlbGVjdGVkVGhlbWUpIHtcclxuICAgIC8vIElmIHRoZSB2YWxpZGF0aW9uIGlzIGZ1bGZpbGxlZCwgd2UgYXNrIHdoYXQgdGhlIGlzc3VlIHdhcyB0byBrbm93IGlmIHdlIGFjdGl2YXRlZCBvciBkZWFjdGl2YXRlZCB0aGUgZGFya1xyXG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3Rbc2VsZWN0ZWRUaGVtZSA9PT0gJ2RhcmsnID8gJ2FkZCcgOiAncmVtb3ZlJ10oZGFya1RoZW1lKVxyXG4gICAgdGhlbWVCdXR0b24uY2xhc3NMaXN0W3NlbGVjdGVkSWNvbiA9PT0gJ2ZhLW1vb24nID8gJ2FkZCcgOiAncmVtb3ZlJ10oaWNvblRoZW1lKVxyXG59XHJcblxyXG4vLyBBY3RpdmF0ZSAvIGRlYWN0aXZhdGUgdGhlIHRoZW1lIG1hbnVhbGx5IHdpdGggdGhlIGJ1dHRvblxyXG50aGVtZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIC8vIEFkZCBvciByZW1vdmUgdGhlIGRhcmsgLyBpY29uIHRoZW1lXHJcbiAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoZGFya1RoZW1lKVxyXG4gICAgdGhlbWVCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShpY29uVGhlbWUpXHJcbiAgICAvLyBXZSBzYXZlIHRoZSB0aGVtZSBhbmQgdGhlIGN1cnJlbnQgaWNvbiB0aGF0IHRoZSB1c2VyIGNob3NlXHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2VsZWN0ZWQtdGhlbWUnLCBnZXRDdXJyZW50VGhlbWUoKSlcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzZWxlY3RlZC1pY29uJywgZ2V0Q3VycmVudEljb24oKSlcclxufSlcclxuXHJcblxyXG5cclxuLy8gZm9ybSBcclxuXHJcbntcclxuICAgIGZ1bmN0aW9uIHJlbW92ZUZpZWxkRXJyb3IoZmllbGQpIHtcclxuICAgICAgY29uc3QgZXJyb3JUZXh0ID0gZmllbGQubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gICAgICBpZiAoZXJyb3JUZXh0ICE9PSBudWxsKSB7XHJcbiAgICAgICAgaWYgKGVycm9yVGV4dC5jbGFzc0xpc3QuY29udGFpbnMoXCJmb3JtLWVycm9yLXRleHRcIikpIHtcclxuICAgICAgICAgIGVycm9yVGV4dC5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgXHJcbiAgICBmdW5jdGlvbiBjcmVhdGVGaWVsZEVycm9yKGZpZWxkLCB0ZXh0KSB7XHJcbiAgICAgIHJlbW92ZUZpZWxkRXJyb3IoZmllbGQpOyAvL3ByemVkIHN0d29yemVuaWVtIHVzdXdhbSBieSB6YXdzemUgYnnFgiBuYWpub3dzenkga29tdW5pa2F0XHJcbiAgXHJcbiAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKFwiZm9ybS1lcnJvci10ZXh0XCIpO1xyXG4gICAgICBkaXYuaW5uZXJUZXh0ID0gdGV4dDtcclxuICAgICAgaWYgKGZpZWxkLm5leHRFbGVtZW50U2libGluZyA9PT0gbnVsbCkge1xyXG4gICAgICAgIGZpZWxkLnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoIWZpZWxkLm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QuY29udGFpbnMoXCJmb3JtLWVycm9yLXRleHRcIikpIHtcclxuICAgICAgICAgIGZpZWxkLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGRpdiwgZmllbGQubmV4dEVsZW1lbnRTaWJsaW5nKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgXHJcbiAgICBmdW5jdGlvbiB0b2dnbGVFcnJvckZpZWxkKGZpZWxkLCBzaG93KSB7XHJcbiAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGZpZWxkLm5leHRFbGVtZW50U2libGluZztcclxuICAgICAgaWYgKGVycm9yVGV4dCAhPT0gbnVsbCkge1xyXG4gICAgICAgIGlmIChlcnJvclRleHQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZm9ybS1lcnJvci10ZXh0XCIpKSB7XHJcbiAgICAgICAgICBlcnJvclRleHQuc3R5bGUuZGlzcGxheSA9IHNob3cgPyBcImJsb2NrXCIgOiBcIm5vbmVcIjtcclxuICAgICAgICAgIGVycm9yVGV4dC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgc2hvdyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIFxyXG4gICAgZnVuY3Rpb24gbWFya0ZpZWxkQXNFcnJvcihmaWVsZCwgc2hvdykge1xyXG4gICAgICBpZiAoc2hvdykge1xyXG4gICAgICAgIGZpZWxkLmNsYXNzTGlzdC5hZGQoXCJmaWVsZC1lcnJvclwiKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBmaWVsZC5jbGFzc0xpc3QucmVtb3ZlKFwiZmllbGQtZXJyb3JcIik7XHJcbiAgICAgICAgdG9nZ2xlRXJyb3JGaWVsZChmaWVsZCwgZmFsc2UpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIFxyXG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29udGFjdEZvcm1cIik7XHJcbiAgICBjb25zdCBpbnB1dHMgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbcmVxdWlyZWRdXCIpO1xyXG4gIFxyXG4gICAgLy93ecWCxIVjemFteSBkb215xZtsbsSFIHdhbGlkYWNqxJlcclxuICAgIGZvcm0uc2V0QXR0cmlidXRlKFwibm92YWxpZGF0ZVwiLCB0cnVlKTtcclxuICBcclxuICAgIGZvciAoY29uc3QgZWwgb2YgaW5wdXRzKSB7XHJcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBlID0+IG1hcmtGaWVsZEFzRXJyb3IoZS50YXJnZXQsICFlLnRhcmdldC5jaGVja1ZhbGlkaXR5KCkpKTtcclxuICAgIH1cclxuICBcclxuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBlID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIFxyXG4gICAgICBsZXQgZm9ybUVycm9ycyA9IGZhbHNlO1xyXG4gIFxyXG4gICAgICAvLzIgZXRhcCAtIHNwcmF3ZHphbXkgcG9zemN6ZWfDs2xuZSBwb2xhIGdkeSBrdG/FmyBjaGNlIHd5c8WCYcSHIGZvcm11bGFyelxyXG4gICAgICBmb3IgKGNvbnN0IGVsIG9mIGlucHV0cykge1xyXG4gICAgICAgIHJlbW92ZUZpZWxkRXJyb3IoZWwpO1xyXG4gICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJmaWVsZC1lcnJvclwiKTtcclxuICBcclxuICAgICAgICBpZiAoIWVsLmNoZWNrVmFsaWRpdHkoKSkge1xyXG4gICAgICAgICAgY3JlYXRlRmllbGRFcnJvcihlbCwgZWwuZGF0YXNldC5lcnJvclRleHQpO1xyXG4gICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChcImZpZWxkLWVycm9yXCIpO1xyXG4gICAgICAgICAgZm9ybUhhc0Vycm9ycyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgXHJcbiAgICAgIGlmICghZm9ybUVycm9ycykge1xyXG4gICAgICAgIGNvbnN0IHN1Ym1pdCA9IGZvcm0ucXVlcnlTZWxlY3RvcihcIlt0eXBlPXN1Ym1pdF1cIik7XHJcbiAgICAgICAgc3VibWl0LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICBzdWJtaXQuY2xhc3NMaXN0LmFkZChcImxvYWRpbmdcIik7XHJcbiAgXHJcbiAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSk7XHJcbiAgICAgICAgY29uc3QgdXJsID0gZm9ybS5nZXRBdHRyaWJ1dGUoXCJhY3Rpb25cIik7XHJcbiAgICAgICAgY29uc3QgbWV0aG9kID0gZm9ybS5nZXRBdHRyaWJ1dGUoXCJtZXRob2RcIik7XHJcbiAgXHJcbiAgICAgICAgZmV0Y2godXJsLCB7XHJcbiAgICAgICAgICBtZXRob2Q6IG1ldGhvZC50b1VwcGVyQ2FzZSgpLFxyXG4gICAgICAgICAgYm9keTogZm9ybURhdGFcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXHJcbiAgICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICBpZiAocmVzLmVycm9ycykge1xyXG4gICAgICAgICAgICAgIGNvbnN0IHNlbGVjdG9ycyA9IHJlcy5lcnJvcnMubWFwKGVsID0+IGBbbmFtZT1cIiR7ZWx9XCJdYCk7XHJcbiAgICAgICAgICAgICAgY29uc3QgZmllbGRzV2l0aEVycm9ycyA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcnMuam9pbihcIixcIikpO1xyXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgZWwgb2YgZmllbGRzV2l0aEVycm9ycykge1xyXG4gICAgICAgICAgICAgICAgbWFya0ZpZWxkQXNFcnJvcihlbCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVFcnJvckZpZWxkKGVsLCB0cnVlKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IFwib2tcIikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKFwiZm9ybS1zZW5kLXN1Y2Nlc3NcIik7XHJcbiAgICAgICAgICAgICAgICBkaXYuaW5uZXJUZXh0ID0gXCJXeXPFgmFuaWUgd2lhZG9tb8WbY2kgc2nEmSBuaWUgcG93aW9kxYJvXCI7XHJcbiAgXHJcbiAgICAgICAgICAgICAgICBmb3JtLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKGRpdiwgZm9ybSk7XHJcbiAgICAgICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5XaWFkb21vxZvEhyB6b3N0YcWCYSB3eXPFgmFuYTwvc3Ryb25nPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+RHppxJlrdWplbXkgemEga29udGFrdC4gUG9zdGFyYW15IHNpxJkgb2Rwb3dpZWR6aWXEhyBqYWsgbmFqc3p5YmNpZWo8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgICAgICBmb3JtLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gXCJlcnJvclwiKSB7XHJcbiAgICAgICAgICAgICAgICAvL2plxbxlbGkgaXN0bmllamUga29tdW5pa2F0IG8gYsWCxJlkemllIHd5c3nFgmtpXHJcbiAgICAgICAgICAgICAgICAvL25wLiBnZW5lcm93YW55IHByenkgcG9wcnplZG5pbSB3eXN5xYJhbml1IGZvcm11bGFyemFcclxuICAgICAgICAgICAgICAgIC8vdXN1d2FteSBnbywgYnkgbmllIGR1cGxpa293YcSHIHR5Y2gga29tdW5pa2F0w7N3XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0dXNFcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1zZW5kLWVycm9yXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1c0Vycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0Vycm9yLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICAgICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKFwiZm9ybS1zZW5kLWVycm9yXCIpO1xyXG4gICAgICAgICAgICAgICAgZGl2LmlubmVyVGV4dCA9IFwiV3lzxYJhbmllIHdpYWRvbW/Fm2NpIHNpxJkgbmllIHBvd2lvZMWCb1wiO1xyXG4gICAgICAgICAgICAgICAgc3VibWl0LnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICBzdWJtaXQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgc3VibWl0LmNsYXNzTGlzdC5yZW1vdmUoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXX0=
